{
  "parameters": {
    "jsCode": "// =============================================================================\n// CARD TYPES & MICRO-ACTION CATALOGUE\n// Defines canonical card types and all available micro-actions\n// =============================================================================\n\n// Card Types\nconst CardType = {\n  EQUIPMENT: 'equipment',\n  DOCUMENT: 'document',\n  FAULT: 'fault',\n  PART: 'part',\n  PREDICTIVE: 'predictive',\n  HANDOVER: 'handover',\n  WORK_ORDER: 'work_order',\n  NOTE: 'note'\n};\n\n// Intent Types\nconst IntentType = {\n  DIAGNOSE_FAULT: 'diagnose_fault',\n  FIND_DOCUMENT: 'find_document',\n  CREATE_WORK_ORDER: 'create_work_order',\n  ADD_TO_HANDOVER: 'add_to_handover',\n  FIND_PART: 'find_part',\n  PREDICTIVE_REQUEST: 'predictive_request',\n  GENERAL_SEARCH: 'general_search'\n};\n\n// User Roles\nconst UserRole = {\n  CHIEF_ENGINEER: 'Chief Engineer',\n  HOD: 'HOD',\n  ENGINEER: 'Engineer',\n  ETO: 'ETO',\n  DECK_OFFICER: 'Deck Officer',\n  CAPTAIN: 'Captain',\n  VIEWER: 'Viewer'\n};\n\n// Action IDs\nconst ActionId = {\n  // Document actions\n  OPEN_DOCUMENT: 'open_document',\n  DOWNLOAD_DOCUMENT: 'download_document',\n  COPY_LINK: 'copy_link',\n  // Equipment actions\n  VIEW_EQUIPMENT: 'view_equipment',\n  VIEW_EQUIPMENT_HISTORY: 'view_equipment_history',\n  CREATE_WORK_ORDER: 'create_work_order',\n  SHOW_PREDICTIVE_INSIGHT: 'show_predictive_insight',\n  // Fault actions\n  VIEW_FAULT_DETAILS: 'view_fault_details',\n  FIND_RELATED_MANUAL: 'find_related_manual',\n  VIEW_FAULT_HISTORY: 'view_fault_history',\n  // Part actions\n  VIEW_PART_STOCK: 'view_part_stock',\n  ORDER_PART: 'order_part',\n  ADD_PART_TO_WORK_ORDER: 'add_part_to_work_order',\n  FIND_SUBSTITUTE: 'find_substitute',\n  // Work order actions\n  VIEW_WORK_ORDER: 'view_work_order',\n  CLONE_WORK_ORDER: 'clone_work_order',\n  // Handover actions\n  VIEW_HANDOVER: 'view_handover',\n  ADD_TO_HANDOVER: 'add_to_handover',\n  // Universal\n  BOOKMARK: 'bookmark',\n  COPY_SNIPPET: 'copy_snippet'\n};\n\n// =============================================================================\n// ACTION CATALOGUE\n// =============================================================================\nconst ACTION_CATALOGUE = {\n  [ActionId.OPEN_DOCUMENT]: {\n    id: ActionId.OPEN_DOCUMENT,\n    label: 'Open Document',\n    icon: 'document',\n    actionType: 'navigate',\n    requiresConfirmation: false,\n    allowedRoles: [],\n    allowedCardTypes: [CardType.DOCUMENT],\n    boostedIntents: [IntentType.FIND_DOCUMENT, IntentType.DIAGNOSE_FAULT]\n  },\n  [ActionId.DOWNLOAD_DOCUMENT]: {\n    id: ActionId.DOWNLOAD_DOCUMENT,\n    label: 'Download',\n    icon: 'download',\n    actionType: 'api_call',\n    requiresConfirmation: false,\n    allowedRoles: [],\n    allowedCardTypes: [CardType.DOCUMENT],\n    boostedIntents: []\n  },\n  [ActionId.COPY_LINK]: {\n    id: ActionId.COPY_LINK,\n    label: 'Copy Link',\n    icon: 'link',\n    actionType: 'copy',\n    requiresConfirmation: false,\n    allowedRoles: [],\n    allowedCardTypes: [CardType.DOCUMENT, CardType.WORK_ORDER, CardType.HANDOVER],\n    boostedIntents: []\n  },\n  [ActionId.VIEW_EQUIPMENT]: {\n    id: ActionId.VIEW_EQUIPMENT,\n    label: 'View Equipment',\n    icon: 'engine',\n    actionType: 'navigate',\n    requiresConfirmation: false,\n    allowedRoles: [],\n    allowedCardTypes: [CardType.EQUIPMENT, CardType.FAULT, CardType.WORK_ORDER],\n    boostedIntents: []\n  },\n  [ActionId.VIEW_EQUIPMENT_HISTORY]: {\n    id: ActionId.VIEW_EQUIPMENT_HISTORY,\n    label: 'View History',\n    icon: 'history',\n    actionType: 'navigate',\n    requiresConfirmation: false,\n    allowedRoles: [],\n    allowedCardTypes: [CardType.EQUIPMENT, CardType.FAULT],\n    boostedIntents: [IntentType.DIAGNOSE_FAULT, IntentType.PREDICTIVE_REQUEST]\n  },\n  [ActionId.CREATE_WORK_ORDER]: {\n    id: ActionId.CREATE_WORK_ORDER,\n    label: 'Create Work Order',\n    icon: 'wrench',\n    actionType: 'modal',\n    requiresConfirmation: false,\n    allowedRoles: [UserRole.CHIEF_ENGINEER, UserRole.HOD, UserRole.ENGINEER, UserRole.ETO],\n    allowedCardTypes: [CardType.EQUIPMENT, CardType.FAULT, CardType.PREDICTIVE],\n    boostedIntents: [IntentType.DIAGNOSE_FAULT, IntentType.CREATE_WORK_ORDER]\n  },\n  [ActionId.SHOW_PREDICTIVE_INSIGHT]: {\n    id: ActionId.SHOW_PREDICTIVE_INSIGHT,\n    label: 'Predictive Insight',\n    icon: 'chart',\n    actionType: 'modal',\n    requiresConfirmation: false,\n    allowedRoles: [],\n    allowedCardTypes: [CardType.EQUIPMENT, CardType.PREDICTIVE],\n    boostedIntents: [IntentType.PREDICTIVE_REQUEST],\n    requiresFeature: 'predictive_enabled'\n  },\n  [ActionId.VIEW_FAULT_DETAILS]: {\n    id: ActionId.VIEW_FAULT_DETAILS,\n    label: 'View Details',\n    icon: 'alert',\n    actionType: 'navigate',\n    requiresConfirmation: false,\n    allowedRoles: [],\n    allowedCardTypes: [CardType.FAULT],\n    boostedIntents: []\n  },\n  [ActionId.FIND_RELATED_MANUAL]: {\n    id: ActionId.FIND_RELATED_MANUAL,\n    label: 'Find Manual',\n    icon: 'book',\n    actionType: 'api_call',\n    requiresConfirmation: false,\n    allowedRoles: [],\n    allowedCardTypes: [CardType.FAULT, CardType.EQUIPMENT],\n    boostedIntents: [IntentType.DIAGNOSE_FAULT, IntentType.FIND_DOCUMENT]\n  },\n  [ActionId.VIEW_FAULT_HISTORY]: {\n    id: ActionId.VIEW_FAULT_HISTORY,\n    label: 'Fault History',\n    icon: 'history',\n    actionType: 'navigate',\n    requiresConfirmation: false,\n    allowedRoles: [],\n    allowedCardTypes: [CardType.FAULT],\n    boostedIntents: [IntentType.DIAGNOSE_FAULT, IntentType.PREDICTIVE_REQUEST]\n  },\n  [ActionId.VIEW_PART_STOCK]: {\n    id: ActionId.VIEW_PART_STOCK,\n    label: 'View Stock',\n    icon: 'inventory',\n    actionType: 'navigate',\n    requiresConfirmation: false,\n    allowedRoles: [],\n    allowedCardTypes: [CardType.PART],\n    boostedIntents: [IntentType.FIND_PART]\n  },\n  [ActionId.ORDER_PART]: {\n    id: ActionId.ORDER_PART,\n    label: 'Order Part',\n    icon: 'cart',\n    actionType: 'modal',\n    requiresConfirmation: true,\n    allowedRoles: [UserRole.CHIEF_ENGINEER, UserRole.HOD, UserRole.ENGINEER],\n    allowedCardTypes: [CardType.PART],\n    boostedIntents: [IntentType.FIND_PART]\n  },\n  [ActionId.ADD_PART_TO_WORK_ORDER]: {\n    id: ActionId.ADD_PART_TO_WORK_ORDER,\n    label: 'Add to Work Order',\n    icon: 'plus',\n    actionType: 'modal',\n    requiresConfirmation: false,\n    allowedRoles: [UserRole.CHIEF_ENGINEER, UserRole.HOD, UserRole.ENGINEER, UserRole.ETO],\n    allowedCardTypes: [CardType.PART],\n    boostedIntents: [IntentType.CREATE_WORK_ORDER]\n  },\n  [ActionId.FIND_SUBSTITUTE]: {\n    id: ActionId.FIND_SUBSTITUTE,\n    label: 'Find Substitute',\n    icon: 'swap',\n    actionType: 'api_call',\n    requiresConfirmation: false,\n    allowedRoles: [],\n    allowedCardTypes: [CardType.PART],\n    boostedIntents: [IntentType.FIND_PART]\n  },\n  [ActionId.VIEW_WORK_ORDER]: {\n    id: ActionId.VIEW_WORK_ORDER,\n    label: 'View Details',\n    icon: 'clipboard',\n    actionType: 'navigate',\n    requiresConfirmation: false,\n    allowedRoles: [],\n    allowedCardTypes: [CardType.WORK_ORDER],\n    boostedIntents: []\n  },\n  [ActionId.CLONE_WORK_ORDER]: {\n    id: ActionId.CLONE_WORK_ORDER,\n    label: 'Clone as Template',\n    icon: 'copy',\n    actionType: 'modal',\n    requiresConfirmation: false,\n    allowedRoles: [UserRole.CHIEF_ENGINEER, UserRole.HOD, UserRole.ENGINEER],\n    allowedCardTypes: [CardType.WORK_ORDER],\n    boostedIntents: [IntentType.CREATE_WORK_ORDER]\n  },\n  [ActionId.VIEW_HANDOVER]: {\n    id: ActionId.VIEW_HANDOVER,\n    label: 'View Handover',\n    icon: 'handover',\n    actionType: 'navigate',\n    requiresConfirmation: false,\n    allowedRoles: [],\n    allowedCardTypes: [CardType.HANDOVER],\n    boostedIntents: []\n  },\n  [ActionId.ADD_TO_HANDOVER]: {\n    id: ActionId.ADD_TO_HANDOVER,\n    label: 'Add to Handover',\n    icon: 'clipboard-plus',\n    actionType: 'api_call',\n    requiresConfirmation: false,\n    allowedRoles: [UserRole.CHIEF_ENGINEER, UserRole.HOD, UserRole.ENGINEER, UserRole.ETO],\n    allowedCardTypes: [CardType.DOCUMENT, CardType.FAULT, CardType.WORK_ORDER, CardType.EQUIPMENT, CardType.PART, CardType.NOTE],\n    boostedIntents: [IntentType.ADD_TO_HANDOVER]\n  },\n  [ActionId.BOOKMARK]: {\n    id: ActionId.BOOKMARK,\n    label: 'Bookmark',\n    icon: 'bookmark',\n    actionType: 'api_call',\n    requiresConfirmation: false,\n    allowedRoles: [],\n    allowedCardTypes: [],\n    boostedIntents: []\n  },\n  [ActionId.COPY_SNIPPET]: {\n    id: ActionId.COPY_SNIPPET,\n    label: 'Copy Snippet',\n    icon: 'copy',\n    actionType: 'copy',\n    requiresConfirmation: false,\n    allowedRoles: [],\n    allowedCardTypes: [],\n    boostedIntents: []\n  }\n};\n\n// Default actions per card type\nconst DEFAULT_ACTIONS_BY_CARD_TYPE = {\n  [CardType.DOCUMENT]: [ActionId.OPEN_DOCUMENT, ActionId.ADD_TO_HANDOVER, ActionId.COPY_LINK, ActionId.DOWNLOAD_DOCUMENT],\n  [CardType.EQUIPMENT]: [ActionId.VIEW_EQUIPMENT, ActionId.VIEW_EQUIPMENT_HISTORY, ActionId.CREATE_WORK_ORDER, ActionId.SHOW_PREDICTIVE_INSIGHT],\n  [CardType.FAULT]: [ActionId.VIEW_FAULT_DETAILS, ActionId.CREATE_WORK_ORDER, ActionId.FIND_RELATED_MANUAL, ActionId.ADD_TO_HANDOVER],\n  [CardType.PART]: [ActionId.VIEW_PART_STOCK, ActionId.ORDER_PART, ActionId.ADD_PART_TO_WORK_ORDER, ActionId.FIND_SUBSTITUTE],\n  [CardType.PREDICTIVE]: [ActionId.VIEW_EQUIPMENT, ActionId.CREATE_WORK_ORDER, ActionId.VIEW_EQUIPMENT_HISTORY, ActionId.SHOW_PREDICTIVE_INSIGHT],\n  [CardType.HANDOVER]: [ActionId.VIEW_HANDOVER, ActionId.COPY_LINK],\n  [CardType.WORK_ORDER]: [ActionId.VIEW_WORK_ORDER, ActionId.VIEW_EQUIPMENT, ActionId.CLONE_WORK_ORDER, ActionId.ADD_TO_HANDOVER],\n  [CardType.NOTE]: [ActionId.ADD_TO_HANDOVER, ActionId.COPY_SNIPPET]\n};\n\n// Store in workflow static data for use by other nodes\n$workflow.staticData.CardType = CardType;\n$workflow.staticData.IntentType = IntentType;\n$workflow.staticData.UserRole = UserRole;\n$workflow.staticData.ActionId = ActionId;\n$workflow.staticData.ACTION_CATALOGUE = ACTION_CATALOGUE;\n$workflow.staticData.DEFAULT_ACTIONS_BY_CARD_TYPE = DEFAULT_ACTIONS_BY_CARD_TYPE;\n\nreturn [{ json: { status: 'Card types and action catalogue loaded', cardTypes: Object.keys(CardType), actionCount: Object.keys(ACTION_CATALOGUE).length } }];"
  },
  "name": "Card Types & Action Catalogue",
  "type": "n8n-nodes-base.code",
  "typeVersion": 2,
  "position": [0, 0]
}
