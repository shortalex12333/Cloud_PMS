{
  "suite_name": "composition_integration_v1",
  "version": "1.0.0",
  "description": "Integration tests for capability composition (multi-entity queries). Tests parallel execution, result merging, and observability.",
  "test_cases": [
    {"id": "comp-001", "entities": [{"type": "PART_NAME", "value": "fuel"}], "expect_capabilities": ["part_by_part_number_or_name"], "expect_min_results": 1, "expect_outcome": "success", "description": "Single part name entity"},
    {"id": "comp-002", "entities": [{"type": "LOCATION", "value": "Yacht"}], "expect_capabilities": ["inventory_by_location"], "expect_min_results": 1, "expect_outcome": "success", "description": "Single location entity"},
    {"id": "comp-003", "entities": [{"type": "FAULT_CODE", "value": "1234"}], "expect_capabilities": ["fault_by_fault_code"], "expect_min_results": 1, "expect_outcome": "success", "description": "Single fault code entity"},
    {"id": "comp-004", "entities": [{"type": "PART_NAME", "value": "oil"}, {"type": "LOCATION", "value": "Yacht"}], "expect_capabilities": ["part_by_part_number_or_name", "inventory_by_location"], "expect_min_results": 2, "expect_outcome": "success", "description": "Two entities, two capabilities"},
    {"id": "comp-005", "entities": [{"type": "PART_NAME", "value": "filter"}, {"type": "FAULT_CODE", "value": "1234"}], "expect_capabilities": ["part_by_part_number_or_name", "fault_by_fault_code"], "expect_min_results": 2, "expect_outcome": "success", "description": "Parts and faults"},
    {"id": "comp-006", "entities": [{"type": "PART_NAME", "value": "element"}, {"type": "LOCATION", "value": "Yacht"}, {"type": "FAULT_CODE", "value": "1234"}], "expect_capabilities": ["part_by_part_number_or_name", "inventory_by_location", "fault_by_fault_code"], "expect_min_results": 3, "expect_outcome": "success", "description": "Three entities, three capabilities"},
    {"id": "comp-007", "entities": [{"type": "PART_NAME", "value": "fuel"}, {"type": "MANUFACTURER", "value": "MTU"}], "expect_capabilities": ["part_by_part_number_or_name"], "expect_min_results": 1, "expect_outcome": "success", "description": "Two entities, same capability"},
    {"id": "comp-008", "entities": [{"type": "WORK_ORDER_ID", "value": "WO-123"}], "expect_capabilities": ["work_order_by_id"], "expect_blocked": ["work_order_by_id"], "expect_min_results": 0, "expect_outcome": "blocked", "description": "Blocked capability (work order)"},
    {"id": "comp-009", "entities": [{"type": "EQUIPMENT_NAME", "value": "Main Engine"}], "expect_capabilities": ["equipment_by_name_or_model"], "expect_blocked": ["equipment_by_name_or_model"], "expect_min_results": 0, "expect_outcome": "blocked", "description": "Blocked capability (equipment)"},
    {"id": "comp-010", "entities": [{"type": "PART_NAME", "value": "oil"}, {"type": "WORK_ORDER_ID", "value": "WO-123"}], "expect_capabilities": ["part_by_part_number_or_name", "work_order_by_id"], "expect_blocked": ["work_order_by_id"], "expect_min_results": 1, "expect_outcome": "partial", "description": "Mixed: one active, one blocked"},
    {"id": "comp-011", "entities": [{"type": "UNKNOWN_TYPE", "value": "something"}], "expect_capabilities": [], "expect_min_results": 0, "expect_outcome": "unknown", "description": "Unknown entity type"},
    {"id": "comp-012", "entities": [], "expect_capabilities": [], "expect_min_results": 0, "expect_outcome": "unknown", "description": "Empty entities"},
    {"id": "comp-013", "entities": [{"type": "PART_NAME", "value": "nonexistent_xyz_999"}], "expect_capabilities": ["part_by_part_number_or_name"], "expect_min_results": 0, "expect_outcome": "empty", "description": "Valid capability, no results"},
    {"id": "comp-014", "entities": [{"type": "DOCUMENT_QUERY", "value": "engine"}], "expect_capabilities": ["documents_search"], "expect_min_results": 0, "expect_outcome": "success", "description": "Document search"},
    {"id": "comp-015", "entities": [{"type": "SYSTEM_NAME", "value": "fuel"}], "expect_capabilities": ["graph_node_search"], "expect_min_results": 1, "expect_outcome": "success", "description": "Graph node search"},
    {"id": "comp-016", "entities": [{"type": "PART_NUMBER", "value": "ENG-0008-103"}], "expect_capabilities": ["part_by_part_number_or_name"], "expect_min_results": 1, "expect_outcome": "success", "description": "Exact part number"},
    {"id": "comp-017", "entities": [{"type": "SYMPTOM", "value": "pressure"}], "expect_capabilities": ["fault_by_fault_code"], "expect_min_results": 1, "expect_outcome": "success", "description": "Symptom search"},
    {"id": "comp-018", "entities": [{"type": "EQUIPMENT_TYPE", "value": "Caterpillar"}], "expect_capabilities": ["fault_by_fault_code"], "expect_min_results": 1, "expect_outcome": "success", "description": "Equipment type in faults"},
    {"id": "comp-019", "entities": [{"type": "PART_NAME", "value": "oil"}, {"type": "LOCATION", "value": "Yacht"}, {"type": "WORK_ORDER_ID", "value": "WO-123"}], "expect_capabilities": ["part_by_part_number_or_name", "inventory_by_location", "work_order_by_id"], "expect_blocked": ["work_order_by_id"], "expect_min_results": 2, "expect_outcome": "partial", "description": "Three caps, one blocked"},
    {"id": "comp-020", "entities": [{"type": "WORK_ORDER_ID", "value": "WO-1"}, {"type": "EQUIPMENT_NAME", "value": "Engine"}], "expect_capabilities": ["work_order_by_id", "equipment_by_name_or_model"], "expect_blocked": ["work_order_by_id", "equipment_by_name_or_model"], "expect_min_results": 0, "expect_outcome": "blocked", "description": "All capabilities blocked"}
  ]
}
