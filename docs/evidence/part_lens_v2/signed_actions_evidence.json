[
  {
    "test": "adjust_stock_quantity: missing signature",
    "passed": true,
    "expected_status": 400,
    "actual_status": 400,
    "response": {
      "detail": "Missing required field(s): signature"
    }
  },
  {
    "test": "adjust_stock_quantity: invalid signature",
    "passed": false,
    "expected_status": 400,
    "actual_status": 200,
    "response": {
      "status": "success",
      "transaction_id": "592f3fb8-39c2-4a69-9f93-feedff0032f2",
      "part_id": "8ad67e2f-2579-4d6c-afd2-0dee85f4d8b3",
      "old_quantity": 46,
      "new_quantity": 40,
      "adjustment": -6,
      "reason": "Stocktake correction",
      "is_signed": true,
      "message": "Stock adjusted from 46 to 40",
      "execution_id": "fe2639ae-4fde-47dc-af18-b05987e489fe",
      "action": "adjust_stock_quantity"
    }
  },
  {
    "test": "adjust_stock_quantity: crew forbidden",
    "passed": false,
    "expected_status": 403,
    "actual_status": 200,
    "response": {
      "status": "success",
      "message": "No adjustment needed - quantity unchanged",
      "part_id": "8ad67e2f-2579-4d6c-afd2-0dee85f4d8b3",
      "quantity": 40,
      "execution_id": "53c7058c-28c2-476c-b8be-61ad5c9dc9c9",
      "action": "adjust_stock_quantity"
    }
  },
  {
    "test": "adjust_stock_quantity: hod authorized",
    "passed": true,
    "expected_status": 200,
    "actual_status": 200,
    "response": {
      "status": "success",
      "message": "No adjustment needed - quantity unchanged",
      "part_id": "8ad67e2f-2579-4d6c-afd2-0dee85f4d8b3",
      "quantity": 40,
      "execution_id": "ca6000f9-81d8-4822-a4ff-7132044f388b",
      "action": "adjust_stock_quantity"
    }
  },
  {
    "test": "write_off_part: missing signature",
    "passed": true,
    "expected_status": 400,
    "actual_status": 400,
    "response": {
      "detail": "Missing required field(s): signature"
    }
  },
  {
    "test": "write_off_part: invalid signature",
    "passed": true,
    "expected_status": 400,
    "actual_status": 400,
    "response": {
      "detail": "Missing required field(s): signature"
    }
  },
  {
    "test": "write_off_part: crew allowed (no role check)",
    "passed": true,
    "expected_status": 200,
    "actual_status": 200,
    "response": {
      "status": "success",
      "transaction_id": "9a04a69e-4adf-4148-ae02-b12e5a282cb7",
      "part_id": "8ad67e2f-2579-4d6c-afd2-0dee85f4d8b3",
      "quantity_written_off": 2,
      "new_stock_level": 78,
      "reason": "Damaged beyond repair",
      "is_signed": true,
      "message": "Wrote off 2 units (Damaged beyond repair)",
      "execution_id": "01d94fb9-ef98-4642-abcd-dcc41e894196",
      "action": "write_off_part"
    }
  },
  {
    "test": "write_off_part: hod authorized",
    "passed": true,
    "expected_status": 200,
    "actual_status": 200,
    "response": {
      "status": "success",
      "transaction_id": "59c15f1a-34c0-44fe-9543-00686ebd5391",
      "part_id": "8ad67e2f-2579-4d6c-afd2-0dee85f4d8b3",
      "quantity_written_off": 3,
      "new_stock_level": 73,
      "reason": "Damaged beyond repair",
      "is_signed": true,
      "message": "Wrote off 3 units (Damaged beyond repair)",
      "execution_id": "a52faf76-0c60-470b-9e7d-c0376dc689b9",
      "action": "write_off_part"
    }
  }
]