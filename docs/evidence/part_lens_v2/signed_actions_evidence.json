[
  {
    "test": "adjust_stock_quantity: missing signature",
    "passed": true,
    "expected_status": 400,
    "actual_status": 400,
    "response": {
      "detail": "Missing required field(s): signature"
    }
  },
  {
    "test": "adjust_stock_quantity: invalid signature",
    "passed": true,
    "expected_status": 400,
    "actual_status": 400,
    "response": {
      "detail": "Signature must contain 'pin' and 'totp' keys for SIGNED action"
    }
  },
  {
    "test": "adjust_stock_quantity: crew forbidden",
    "passed": true,
    "expected_status": 403,
    "actual_status": 403,
    "response": {
      "detail": "Role 'crew' forbidden: not authorized to perform signed action 'adjust_stock_quantity'"
    }
  },
  {
    "test": "adjust_stock_quantity: hod authorized",
    "passed": true,
    "expected_status": 200,
    "actual_status": 200,
    "response": {
      "status": "success",
      "transaction_id": "60fa8e84-4636-4f60-9d19-ab510d0173b1",
      "part_id": "8ad67e2f-2579-4d6c-afd2-0dee85f4d8b3",
      "old_quantity": 35,
      "new_quantity": 40,
      "adjustment": 5,
      "reason": "Stocktake correction",
      "is_signed": true,
      "message": "Stock adjusted from 35 to 40",
      "execution_id": "5df29f5d-c6e4-4bca-ae9d-550318fd5254",
      "action": "adjust_stock_quantity"
    }
  },
  {
    "test": "write_off_part: missing signature",
    "passed": true,
    "expected_status": 400,
    "actual_status": 400,
    "response": {
      "detail": "Missing required field(s): signature"
    }
  },
  {
    "test": "write_off_part: invalid signature",
    "passed": true,
    "expected_status": 400,
    "actual_status": 400,
    "response": {
      "detail": "Missing required field(s): signature"
    }
  },
  {
    "test": "write_off_part: crew allowed (no role check)",
    "passed": true,
    "expected_status": 200,
    "actual_status": 200,
    "response": {
      "status": "success",
      "transaction_id": "248bc206-f8a4-427a-9123-158d3e60eb9b",
      "part_id": "8ad67e2f-2579-4d6c-afd2-0dee85f4d8b3",
      "quantity_written_off": 2,
      "new_stock_level": 88,
      "reason": "Damaged beyond repair",
      "is_signed": true,
      "message": "Wrote off 2 units (Damaged beyond repair)",
      "execution_id": "96ae47f0-460a-46a8-bd4b-d1d7b3f3e6ef",
      "action": "write_off_part"
    }
  },
  {
    "test": "write_off_part: hod authorized",
    "passed": true,
    "expected_status": 200,
    "actual_status": 200,
    "response": {
      "status": "success",
      "transaction_id": "11b97af0-cf8c-4597-8a57-6aa8bf3a2dc5",
      "part_id": "8ad67e2f-2579-4d6c-afd2-0dee85f4d8b3",
      "quantity_written_off": 3,
      "new_stock_level": 83,
      "reason": "Damaged beyond repair",
      "is_signed": true,
      "message": "Wrote off 3 units (Damaged beyond repair)",
      "execution_id": "9a359dfb-82bd-44c5-83c5-2058b311234f",
      "action": "write_off_part"
    }
  }
]