============================= test session starts ==============================
platform darwin -- Python 3.9.6, pytest-7.4.3, pluggy-1.6.0 -- /Library/Developer/CommandLineTools/usr/bin/python3
cachedir: .pytest_cache
rootdir: /Volumes/Backup/CELESTE/BACK_BUTTON_CLOUD_PMS/tests/inventory_lens
configfile: pytest.ini
plugins: mock-3.15.1, Faker-20.1.0, cov-4.1.0, asyncio-0.21.1, anyio-3.7.1, langsmith-0.4.8
asyncio: mode=auto
collecting ... collected 24 items / 6 deselected / 18 selected

tests/test_inventory_critical.py::TestConcurrency::test_concurrent_consume_atomic PASSED [  5%]
tests/test_inventory_critical.py::TestConcurrency::test_concurrent_receive_atomic PASSED [ 11%]
tests/test_inventory_critical.py::TestIdempotency::test_duplicate_receive_blocked PASSED [ 16%]
tests/test_inventory_critical.py::TestSoftDelete::test_consume_blocked_on_deactivated PASSED [ 22%]
tests/test_inventory_critical.py::TestSoftDelete::test_trigger_blocks_transaction_insert PASSED [ 27%]
tests/test_inventory_critical.py::TestSoftDelete::test_reactivate_restores_mutations PASSED [ 33%]
tests/test_inventory_critical.py::TestReversalUniqueness::test_double_reversal_blocked PASSED [ 38%]
tests/test_inventory_critical.py::TestReversalUniqueness::test_reversal_of_reversal_blocked PASSED [ 44%]
tests/test_inventory_critical.py::TestTransactionTypeRLS::test_transaction_type_rls_policies_exist PASSED [ 50%]
tests/test_inventory_critical.py::TestTransactionTypeRLS::test_crew_cannot_insert_write_off_via_api SKIPPED [ 55%]
tests/test_inventory_critical.py::TestTransactionTypeRLS::test_crew_cannot_insert_reversed_via_api SKIPPED [ 61%]
tests/test_inventory_critical.py::TestTransferValidation::test_transfer_same_location_blocked PASSED [ 66%]
tests/test_inventory_critical.py::TestHelperParity::test_is_operational_crew_with_existing_users PASSED [ 72%]
tests/test_inventory_critical.py::TestHelperParity::test_is_hod_helper_function PASSED [ 77%]
tests/test_inventory_critical.py::TestDualLedgerConsistency::test_no_inventory_drift PASSED [ 83%]
tests/test_inventory_critical.py::TestStorageNegativeControls::test_documents_wrong_prefix_denied PASSED [ 88%]
tests/test_inventory_critical.py::TestStorageNegativeControls::test_labels_wrong_prefix_denied PASSED [ 94%]
tests/test_inventory_critical.py::TestStorageNegativeControls::test_storage_policies_exist_for_documents_and_labels PASSED [100%]

- generated xml file: /Volumes/Backup/CELESTE/BACK_BUTTON_CLOUD_PMS/docs/evidence/inventory_item/junit_green_ci_20260127_193106.xml -
=========== 16 passed, 2 skipped, 6 deselected, 3 warnings in 12.47s ===========
