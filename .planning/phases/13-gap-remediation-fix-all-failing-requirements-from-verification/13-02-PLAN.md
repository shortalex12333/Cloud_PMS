---
phase: 13-gap-remediation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/components/cards/CertificateCard.tsx
autonomous: true
requirements:
  - CERT-03

must_haves:
  truths:
    - "CertificateCard component exists and renders certificate data"
    - "CertificateCard displays certificate type, issue date, expiry date"
    - "CertificateCard displays issuing authority and linked documents"
    - "CertificateCard shows expiry status (valid, expiring soon, expired)"
  artifacts:
    - path: "apps/web/src/components/cards/CertificateCard.tsx"
      provides: "Certificate lens frontend card component"
      min_lines: 150
      exports: ["CertificateCard"]
  key_links:
    - from: "CertificateCard.tsx"
      to: "ActionButton"
      via: "action prop for certificate actions"
      pattern: "ActionButton.*action"
---

<objective>
Create CertificateCard.tsx frontend component for displaying vessel and crew certificates.

Purpose: Complete CERT-03 verification gap - certificate lens needs a frontend card component.
Output: New CertificateCard.tsx component following WorkOrderCard patterns.
</objective>

<execution_context>
@/Users/celeste7/.claude/get-shit-done/workflows/execute-plan.md
@/Users/celeste7/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@apps/web/src/components/cards/WorkOrderCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CertificateCard component</name>
  <files>apps/web/src/components/cards/CertificateCard.tsx</files>
  <action>
Create a new CertificateCard.tsx component following the WorkOrderCard.tsx pattern:

1. Create file at `apps/web/src/components/cards/CertificateCard.tsx`

2. Define TypeScript interfaces for certificate data:
```tsx
interface CertificateDocument {
  id: string;
  name: string;
  file_type?: string;
  created_at: string;
}

interface CertificateAuditEntry {
  id: string;
  action: string;
  old_values?: Record<string, unknown>;
  new_values?: Record<string, unknown>;
  user_id?: string;
  created_at: string;
}

interface CertificateCardProps {
  certificate: {
    id: string;
    certificate_type: 'vessel' | 'crew';
    certificate_name: string;
    certificate_number?: string;
    issue_date: string;
    expiry_date: string;
    issuing_authority: string;
    status: 'valid' | 'expiring_soon' | 'expired' | 'superseded';
    // For crew certificates
    crew_member_id?: string;
    crew_member_name?: string;
    // Enriched data
    documents?: CertificateDocument[];
    audit_history?: CertificateAuditEntry[];
    documents_count?: number;
    days_until_expiry?: number;
  };
  actions?: MicroAction[];
}
```

3. Implement the component with sections:
   - Header: Status badge, certificate name, certificate number
   - Details grid: Type (vessel/crew), issue date, expiry date, issuing authority
   - For crew certificates: crew member name
   - Expiry countdown indicator (days until expiry, color-coded)
   - Documents section with empty state CTA
   - Audit history section
   - Action buttons (renew, supersede, link document)

4. Status styling:
   - valid: green
   - expiring_soon: orange/yellow
   - expired: red
   - superseded: gray

5. Use CSS variables (tokenized styling) like WorkOrderCard:
   - `var(--celeste-surface)`, `var(--celeste-text-primary)`, etc.

6. Import from same sources as WorkOrderCard:
   - lucide-react icons: FileCheck, Calendar, Building2, User, AlertTriangle, FileText, History, ChevronRight
   - ActionButton from '@/components/actions/ActionButton'
   - cn, formatDate from '@/lib/utils'
  </action>
  <verify>
TypeScript check: `cd /Volumes/Backup/CELESTE/BACK_BUTTON_CLOUD_PMS/apps/web && npx tsc --noEmit`
File exists: `ls -la apps/web/src/components/cards/CertificateCard.tsx`
Export check: `grep "export.*CertificateCard" apps/web/src/components/cards/CertificateCard.tsx`
  </verify>
  <done>CertificateCard.tsx exists with full implementation, exports CertificateCard, compiles without errors.</done>
</task>

</tasks>

<verification>
1. CertificateCard.tsx file exists in apps/web/src/components/cards/
2. TypeScript compilation passes
3. Component exports CertificateCard function
4. Component includes all required sections (header, details, documents, audit)
</verification>

<success_criteria>
- CERT-03: CertificateCard.tsx exists and renders certificate data
- Component follows codebase patterns (tokenized CSS, ActionButton usage)
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/13-gap-remediation-fix-all-failing-requirements-from-verification/13-02-SUMMARY.md`
</output>
