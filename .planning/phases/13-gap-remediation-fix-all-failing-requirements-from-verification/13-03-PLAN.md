---
phase: 13-gap-remediation
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/components/cards/WarrantyCard.tsx
autonomous: true
requirements:
  - WARR-03

must_haves:
  truths:
    - "WarrantyCard component exists and renders warranty claim data"
    - "WarrantyCard displays claim status, type, and amounts"
    - "WarrantyCard shows linked equipment and fault references"
    - "WarrantyCard displays vendor/manufacturer information"
  artifacts:
    - path: "apps/web/src/components/cards/WarrantyCard.tsx"
      provides: "Warranty claims lens frontend card component"
      min_lines: 150
      exports: ["WarrantyCard"]
  key_links:
    - from: "WarrantyCard.tsx"
      to: "ActionButton"
      via: "action prop for warranty actions"
      pattern: "ActionButton.*action"
---

<objective>
Create WarrantyCard.tsx frontend component for displaying warranty claims.

Purpose: Complete WARR-03 verification gap - warranty lens needs a frontend card component.
Output: New WarrantyCard.tsx component following WorkOrderCard patterns.
</objective>

<execution_context>
@/Users/celeste7/.claude/get-shit-done/workflows/execute-plan.md
@/Users/celeste7/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@apps/web/src/components/cards/WorkOrderCard.tsx
@apps/api/handlers/warranty_handlers.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create WarrantyCard component</name>
  <files>apps/web/src/components/cards/WarrantyCard.tsx</files>
  <action>
Create a new WarrantyCard.tsx component following the WorkOrderCard.tsx pattern:

1. Create file at `apps/web/src/components/cards/WarrantyCard.tsx`

2. Define TypeScript interfaces matching warranty_handlers.py schema:
```tsx
interface WarrantyAuditEntry {
  id: string;
  action: string;
  old_values?: Record<string, unknown>;
  new_values?: Record<string, unknown>;
  user_id?: string;
  created_at: string;
}

interface WarrantyCardProps {
  warrantyClaim: {
    id: string;
    claim_number: string;
    title: string;
    description: string;
    claim_type: 'repair' | 'replacement' | 'refund';
    status: 'draft' | 'submitted' | 'under_review' | 'approved' | 'rejected' | 'closed';
    // Equipment/Fault links
    equipment_id?: string;
    equipment_name?: string;
    fault_id?: string;
    fault_code?: string;
    // Vendor info
    vendor_id?: string;
    vendor_name?: string;
    manufacturer?: string;
    part_number?: string;
    serial_number?: string;
    // Dates
    purchase_date?: string;
    warranty_expiry?: string;
    // Amounts
    claimed_amount?: number;
    approved_amount?: number;
    currency: string;
    // Workflow
    drafted_by?: string;
    drafted_at?: string;
    submitted_by?: string;
    submitted_at?: string;
    approved_by?: string;
    approved_at?: string;
    rejection_reason?: string;
    // Enriched data
    audit_history?: WarrantyAuditEntry[];
  };
  actions?: MicroAction[];
}
```

3. Implement the component with sections:
   - Header: Status badge (draft/submitted/approved/rejected), claim number, title
   - Claim type badge (repair/replacement/refund)
   - Details grid: Equipment, fault reference, vendor/manufacturer
   - Financial section: Claimed amount, approved amount (if approved)
   - Dates section: Purchase date, warranty expiry
   - Serial/part number section
   - Rejection reason (if rejected)
   - Audit history section
   - Action buttons based on status (submit, approve, reject, compose email)

4. Status styling:
   - draft: gray
   - submitted: blue
   - under_review: yellow
   - approved: green
   - rejected: red
   - closed: gray (muted)

5. Claim type styling:
   - repair: wrench icon, blue
   - replacement: refresh icon, orange
   - refund: dollar icon, green

6. Use CSS variables (tokenized styling) like WorkOrderCard

7. Import from same sources as WorkOrderCard:
   - lucide-react icons: FileWarning, CheckCircle2, XCircle, Clock, Wrench, RefreshCw, DollarSign, Building2, Package, AlertCircle, History, ChevronRight
   - ActionButton from '@/components/actions/ActionButton'
   - cn, formatDate from '@/lib/utils'
  </action>
  <verify>
TypeScript check: `cd /Volumes/Backup/CELESTE/BACK_BUTTON_CLOUD_PMS/apps/web && npx tsc --noEmit`
File exists: `ls -la apps/web/src/components/cards/WarrantyCard.tsx`
Export check: `grep "export.*WarrantyCard" apps/web/src/components/cards/WarrantyCard.tsx`
  </verify>
  <done>WarrantyCard.tsx exists with full implementation, exports WarrantyCard, compiles without errors.</done>
</task>

</tasks>

<verification>
1. WarrantyCard.tsx file exists in apps/web/src/components/cards/
2. TypeScript compilation passes
3. Component exports WarrantyCard function
4. Component includes all required sections (header, details, financial, audit)
</verification>

<success_criteria>
- WARR-03: WarrantyCard.tsx exists and renders warranty claim data
- Component follows codebase patterns (tokenized CSS, ActionButton usage)
- Component displays all warranty claim fields from handlers
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/13-gap-remediation-fix-all-failing-requirements-from-verification/13-03-SUMMARY.md`
</output>
