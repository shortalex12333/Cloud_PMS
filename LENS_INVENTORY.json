{
  "inventory_created": "2026-02-10",
  "total_lenses": 16,
  "total_handlers": 25,
  "total_api_functions": 150,
  "total_db_tables": 40,

  "lenses": [
    {
      "id": 1,
      "name": "Document Lens",
      "handlers": ["document_handlers.py", "document_comment_handlers.py", "secure_document_handlers.py"],
      "endpoints": ["/webhook/search", "/v1/actions/execute"],
      "db_tables": ["doc_metadata", "doc_metadata_comments", "search_document_chunks"],
      "functions": [
        "get_document_url", "list_documents", "upload_document", "update_document",
        "add_document_tags", "delete_document", "add_document_comment",
        "update_document_comment", "delete_document_comment", "list_document_comments"
      ],
      "test_status": {
        "comprehensive_tests": 69,
        "failure_mode_tests": 28,
        "total_tests": 97,
        "passing": 96,
        "coverage": "98%"
      }
    },
    {
      "id": 2,
      "name": "Parts/Inventory Lens",
      "handlers": ["part_handlers.py", "inventory_handlers.py", "shopping_list_handlers.py"],
      "endpoints": ["/webhook/search", "/v1/actions/execute"],
      "db_tables": ["pms_parts", "pms_inventory_transactions", "pms_inventory_stock", "pms_shopping_list_items"],
      "functions": [
        "view_part_details", "view_low_stock", "check_stock_level", "log_part_usage",
        "add_to_shopping_list", "consume_part", "receive_part", "transfer_part",
        "adjust_stock_quantity", "write_off_part", "generate_part_labels",
        "create_shopping_list_item", "approve_shopping_list_item", "reject_shopping_list_item"
      ],
      "test_status": {
        "comprehensive_tests": 0,
        "failure_mode_tests": 0,
        "total_tests": 0,
        "passing": 0,
        "coverage": "0%"
      }
    },
    {
      "id": 3,
      "name": "Fault Lens",
      "handlers": ["fault_handlers.py", "fault_mutation_handlers.py"],
      "endpoints": ["/webhook/search", "/v1/actions/execute"],
      "db_tables": ["pms_faults", "pms_equipment", "pms_work_orders", "pms_attachments", "graph_edges"],
      "functions": [
        "view_fault", "diagnose_fault", "run_diagnostic", "view_fault_history",
        "suggest_parts", "report_fault", "acknowledge_fault", "close_fault",
        "update_fault", "add_fault_photo", "add_fault_note", "reopen_fault",
        "mark_fault_false_alarm"
      ],
      "test_status": {
        "comprehensive_tests": 0,
        "failure_mode_tests": 0,
        "total_tests": 0,
        "passing": 0,
        "coverage": "0%"
      }
    },
    {
      "id": 4,
      "name": "Equipment Lens",
      "handlers": ["equipment_handlers.py"],
      "endpoints": ["/webhook/search", "/v1/actions/execute"],
      "db_tables": ["pms_equipment", "pms_work_orders", "pms_parts", "pms_faults"],
      "functions": [
        "view_equipment", "view_maintenance_history", "view_equipment_parts",
        "view_linked_faults", "view_equipment_manual"
      ],
      "test_status": {
        "comprehensive_tests": 0,
        "failure_mode_tests": 0,
        "total_tests": 0,
        "passing": 0,
        "coverage": "0%"
      }
    },
    {
      "id": 5,
      "name": "Work Order Lens",
      "handlers": ["work_order_handlers.py", "work_order_mutation_handlers.py"],
      "endpoints": ["/webhook/search", "/v1/actions/execute"],
      "db_tables": ["pms_work_orders", "pms_faults", "pms_work_order_notes", "pms_work_order_parts"],
      "functions": [
        "view_work_order", "view_work_order_history", "view_work_order_checklist",
        "open_work_order", "create_work_order_from_fault", "add_note_to_work_order",
        "add_part_to_work_order", "mark_work_order_complete"
      ],
      "test_status": {
        "comprehensive_tests": 0,
        "failure_mode_tests": 0,
        "total_tests": 0,
        "passing": 0,
        "coverage": "0%"
      }
    },
    {
      "id": 6,
      "name": "Certificate Lens",
      "handlers": ["certificate_handlers.py"],
      "endpoints": ["/webhook/search", "/v1/actions/execute"],
      "db_tables": ["vessel_certificates", "crew_certificates", "doc_metadata"],
      "functions": [
        "list_vessel_certificates", "list_crew_certificates", "get_certificate_details",
        "view_certificate_history", "find_expiring_certificates", "create_vessel_certificate",
        "create_crew_certificate", "update_certificate", "link_document_to_certificate",
        "supersede_certificate"
      ],
      "test_status": {
        "comprehensive_tests": 0,
        "failure_mode_tests": 0,
        "total_tests": 0,
        "passing": 0,
        "coverage": "0%"
      }
    },
    {
      "id": 7,
      "name": "Handover Lens",
      "handlers": ["handover_handlers.py", "handover_workflow_handlers.py"],
      "endpoints": ["/webhook/search", "/v1/actions/execute"],
      "db_tables": ["handover_items", "handover_exports"],
      "functions": [
        "add_to_handover", "edit_handover_item", "validate_draft", "finalize_draft",
        "export_handover", "sign_outgoing", "sign_incoming", "get_pending",
        "verify_export", "regenerate_handover_summary"
      ],
      "test_status": {
        "comprehensive_tests": 0,
        "failure_mode_tests": 0,
        "total_tests": 0,
        "passing": 0,
        "coverage": "0%"
      }
    },
    {
      "id": 8,
      "name": "Hours of Rest / Compliance Lens",
      "handlers": ["hours_of_rest_handlers.py", "p1_compliance_handlers.py"],
      "endpoints": ["/webhook/search", "/v1/actions/execute"],
      "db_tables": ["pms_hours_of_rest", "pms_crew_hours_warnings", "pms_monthly_signoffs", "pms_crew_templates"],
      "functions": [
        "get_hours_of_rest", "get_monthly_signoff", "list_monthly_signoffs",
        "list_crew_templates", "list_crew_warnings", "upsert_hours_of_rest",
        "create_monthly_signoff", "sign_monthly_signoff", "create_crew_template",
        "apply_crew_template", "acknowledge_warning", "update_hours_of_rest",
        "log_delivery_received"
      ],
      "test_status": {
        "comprehensive_tests": 0,
        "failure_mode_tests": 0,
        "total_tests": 0,
        "passing": 0,
        "coverage": "0%"
      }
    },
    {
      "id": 9,
      "name": "Receiving Lens",
      "handlers": ["receiving_handlers.py"],
      "endpoints": ["/webhook/search", "/v1/actions/execute"],
      "db_tables": ["pms_receiving", "pms_receiving_items", "doc_metadata"],
      "functions": [
        "create_receiving", "attach_receiving_image_with_comment", "extract_receiving_candidates",
        "update_receiving_fields", "add_receiving_item", "adjust_receiving_item",
        "link_invoice_document", "accept_receiving", "reject_receiving", "view_receiving_history"
      ],
      "test_status": {
        "comprehensive_tests": 0,
        "failure_mode_tests": 0,
        "total_tests": 0,
        "passing": 0,
        "coverage": "0%"
      }
    },
    {
      "id": 10,
      "name": "Warranty Lens",
      "handlers": ["warranty_handlers.py"],
      "endpoints": ["/webhook/search", "/v1/actions/execute"],
      "db_tables": ["pms_warranty_claims", "pms_equipment", "pms_faults"],
      "functions": [
        "draft_warranty_claim", "submit_warranty_claim", "approve_warranty_claim",
        "reject_warranty_claim"
      ],
      "test_status": {
        "comprehensive_tests": 0,
        "failure_mode_tests": 0,
        "total_tests": 0,
        "passing": 0,
        "coverage": "0%"
      }
    },
    {
      "id": 11,
      "name": "Admin/Membership Lens",
      "handlers": ["admin_handlers.py", "secure_admin_handlers.py"],
      "endpoints": ["/webhook/search", "/v1/actions/execute"],
      "db_tables": ["memberships", "auth_users_profiles", "auth_users_roles", "fleet_registry", "security_events"],
      "functions": [
        "invite_user", "approve_membership", "change_role", "revoke_membership",
        "freeze_yacht", "admin_list_memberships", "admin_get_membership"
      ],
      "test_status": {
        "comprehensive_tests": 0,
        "failure_mode_tests": 0,
        "total_tests": 0,
        "passing": 0,
        "coverage": "0%"
      }
    },
    {
      "id": 12,
      "name": "Context Navigation Lens",
      "handlers": ["context_navigation_handlers.py", "related_handlers.py"],
      "endpoints": ["/webhook/search", "/v1/actions/execute"],
      "db_tables": ["navigation_contexts", "user_added_relations", "pms_entity_links", "ledger_events"],
      "functions": [
        "create_navigation_context", "update_active_anchor", "get_related",
        "add_user_relation", "end_navigation_context", "add_related"
      ],
      "test_status": {
        "comprehensive_tests": 0,
        "failure_mode_tests": 0,
        "total_tests": 0,
        "passing": 0,
        "coverage": "0%"
      }
    },
    {
      "id": 13,
      "name": "List/Query Lens",
      "handlers": ["list_handlers.py"],
      "endpoints": ["/webhook/search", "/v1/actions/execute"],
      "db_tables": ["pms_work_orders", "pms_parts", "pms_faults", "pms_equipment"],
      "functions": [
        "list_work_orders", "list_parts", "list_faults", "list_equipment"
      ],
      "test_status": {
        "comprehensive_tests": 0,
        "failure_mode_tests": 0,
        "total_tests": 0,
        "passing": 0,
        "coverage": "0%"
      }
    },
    {
      "id": 14,
      "name": "Situation State Machines",
      "handlers": ["situation_handlers.py"],
      "endpoints": ["/webhook/search", "/v1/actions/execute"],
      "db_tables": ["pms_faults", "pms_work_orders", "pms_equipment", "pms_parts", "doc_metadata"],
      "functions": [
        "get_situation"
      ],
      "test_status": {
        "comprehensive_tests": 0,
        "failure_mode_tests": 0,
        "total_tests": 0,
        "passing": 0,
        "coverage": "0%"
      }
    },
    {
      "id": 15,
      "name": "Manual/Documentation Lens",
      "handlers": ["manual_handlers.py"],
      "endpoints": ["/webhook/search", "/v1/actions/execute"],
      "db_tables": ["pms_equipment", "doc_metadata"],
      "functions": [
        "show_manual_section"
      ],
      "test_status": {
        "comprehensive_tests": 0,
        "failure_mode_tests": 0,
        "total_tests": 0,
        "passing": 0,
        "coverage": "0%"
      }
    },
    {
      "id": 16,
      "name": "Email Lens",
      "handlers": ["email_handlers.py"],
      "endpoints": ["/email/search", "/email/extract"],
      "db_tables": ["email_messages", "email_extraction_jobs", "email_extraction_results"],
      "functions": [
        "search_emails", "view_email_thread", "extract_entities", "link_to_work_order",
        "link_to_equipment"
      ],
      "test_status": {
        "comprehensive_tests": 0,
        "failure_mode_tests": 0,
        "total_tests": 0,
        "passing": 0,
        "coverage": "0%"
      }
    }
  ],

  "test_summary": {
    "total_planned_tests": 500,
    "completed_tests": 97,
    "passing_tests": 96,
    "coverage_percentage": "19%"
  },

  "priority_order": [
    {"lens": "Document Lens", "priority": 1, "status": "DONE"},
    {"lens": "Parts/Inventory Lens", "priority": 2, "status": "TODO"},
    {"lens": "Fault Lens", "priority": 3, "status": "TODO"},
    {"lens": "Work Order Lens", "priority": 4, "status": "TODO"},
    {"lens": "Equipment Lens", "priority": 5, "status": "TODO"},
    {"lens": "Certificate Lens", "priority": 6, "status": "TODO"},
    {"lens": "Handover Lens", "priority": 7, "status": "TODO"},
    {"lens": "Hours of Rest / Compliance Lens", "priority": 8, "status": "TODO"},
    {"lens": "Receiving Lens", "priority": 9, "status": "TODO"},
    {"lens": "Email Lens", "priority": 10, "status": "TODO"},
    {"lens": "Shopping List Lens", "priority": 11, "status": "TODO"},
    {"lens": "Warranty Lens", "priority": 12, "status": "TODO"},
    {"lens": "Admin/Membership Lens", "priority": 13, "status": "TODO"},
    {"lens": "Context Navigation Lens", "priority": 14, "status": "TODO"},
    {"lens": "List/Query Lens", "priority": 15, "status": "TODO"},
    {"lens": "Situation State Machines", "priority": 16, "status": "TODO"}
  ]
}
